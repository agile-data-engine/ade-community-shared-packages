{
  "packageName" : "DEMO_EXECUTE_SF",
  "packageVersion" : "1001323",
  "templateVersion" : "2.11",
  "dataPackage" : {
    "packageId" : "7368182d-f92b-47a6-86f1-bb9624b4f860",
    "packageName" : "DEMO_EXECUTE_SF",
    "packageVersion" : "1001323",
    "createdUser" : "henri.hemminki@solita.fi",
    "packageStatus" : "COMMITTED",
    "createdTimestamp" : 1692869386223,
    "modifiedTimestamp" : 1692944852138,
    "modifiedUser" : "henri.hemminki@solita.fi",
    "statusChangedTimestamp" : 1692869400516,
    "statusChangedUser" : "henri.hemminki@solita.fi",
    "deleted" : false,
    "description" : "#DEMO",
    "packageType" : "ENTITY_PACKAGE"
  },
  "packageDependencies" : [ ],
  "entities" : [ {
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "packageId" : "7368182d-f92b-47a6-86f1-bb9624b4f860",
    "owner" : "staging",
    "entityName" : "STG_GENERATED_DATA",
    "entityLogicalName" : "GENERATED_DATA",
    "zone" : "INGESTION",
    "entityType" : "STAGE",
    "physicalType" : "TABLE",
    "modifiedTimestamp" : 1692944834148,
    "modifiedUser" : "henri.hemminki@solita.fi",
    "isDeleted" : false,
    "isRecreateForced" : false,
    "isAutomaticallyManaged" : false
  }],
  "attributes" : [ {
    "attributeId" : "4354aa50-3136-4080-881f-ec4c6e335142",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "stg_batch_id",
    "position" : 1,
    "datatype" : "INTEGER8",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "RUN_ID"
  }, {
    "attributeId" : "25bb3948-7163-43d8-b3c7-d1d88b174c07",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "stg_create_time",
    "position" : 2,
    "datatype" : "TIMESTAMP",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SDT_STAGE_CREATE_TIME"
  }, {
    "attributeId" : "8cdf1888-f3b2-43fe-a003-995625359973",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "stg_source_system",
    "position" : 3,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 50,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SDT_STAGE_SOURCE"
  }, {
    "attributeId" : "5a1eb9f9-8735-4bba-ba3d-478617ea539f",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "stg_source_entity",
    "position" : 4,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "description" : "Staging source entity",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SOURCE_ENTITY"
  }, {
    "attributeId" : "267effb1-18d1-4d9e-a3df-05a6c3266714",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "stg_file_name",
    "position" : 5,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "description" : "Staging file name",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "FILE_NAME"
  }, {
    "attributeId" : "6e1c4505-d479-4dd6-baac-4ade353dd589",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "en",
    "position" : 6,
    "datatype" : "INTEGER8",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "9525d13d-ec15-41b1-94b4-70ab7e6c3940",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "name",
    "position" : 7,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "4e88f90c-4ecc-479a-9fb1-e5326971cf4f",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "phone",
    "position" : 8,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "4c0226c9-123d-440c-beff-ace0cd4aa007",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "attributeName" : "comp_name",
    "position" : 9,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 200,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  } ],
  "referenceKeys" : [ ],
  "referenceKeyAttributes" : [ ],
  "keys" : [ ],
  "keyAttributes" : [ ],
  "mappingEntities" : [ {
    "mappingEntitiesId" : "5ffd3473-ecd7-48f6-82c3-abe0ac7eb0b4",
    "mappingName" : "TEMPORARY_MAPPING4d1bb5a9-344c-40f8-a328-323a6a41b342",
    "mappingType" : "SOURCE",
    "targetEntityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "entityLoadId" : "124eb4ac-79ab-4a57-8f10-c4f68e411451",
    "position" : 1
  } ],
  "mappingSourceAttributes" : [ ],
  "mappingTargetAttributes" : [ ],
  "entityLoads" : [ {
    "entityLoadId" : "124eb4ac-79ab-4a57-8f10-c4f68e411451",
    "targetEntityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "loadName" : "load_stg_generated_data_from_source_entity_01",
    "entityLoadType" : "TRANSFORM_PERSIST",
    "schedulingId" : "72baef04098f035e8a320b03ad197818",
    "customSchedulingName" : "DEMO_SCHEDULE",
    "enabled" : true
  } ],
  "entityLoadSteps" : [ {
    "entityLoadStepId" : "68f27cac-3a9a-4af4-9998-97156a17497b",
    "entityLoadId" : "124eb4ac-79ab-4a57-8f10-c4f68e411451",
    "loadStepName" : "truncate_table",
    "position" : 1,
    "loadLanguageName" : "SQL",
    "stepType" : "PRE",
    "readAffectedRows" : false,
    "loadLanguageDescription" : "Run custom SQL logic.",
    "textStep" : "truncate table <target_schema>.<target_entity_name>"
  }, {
    "entityLoadStepId" : "10f715d3-f7fa-41bd-bed9-1606801a3178",
    "entityLoadId" : "124eb4ac-79ab-4a57-8f10-c4f68e411451",
    "loadStepName" : "create_or_replace_temporary_function",
    "position" : 2,
    "loadLanguageName" : "SQL",
    "stepType" : "OVERRIDE",
    "readAffectedRows" : false,
    "loadLanguageDescription" : "Run custom SQL logic.",
    "textStep" : "create or replace temporary function <target_schema>.fake(\n  locale VARCHAR, seed INTEGER)\nreturns variant\nlanguage python\nruntime_version = '3.8'\npackages = ('faker','simplejson')\nhandler = 'fake'\nas\n$$\nimport simplejson as json\nfrom faker import Faker\n\ndef fake(locale, seed):\n    fake = Faker(locale)\n    Faker.seed(seed)\n    results = {}\n    results['name'] = fake.name()\n    results['phone'] = fake.phone_number()\n    results['comp_name'] = fake.company()\n\n    data = json.dumps(results)\n    return json.loads(data)\n$$;"
  }, {
    "entityLoadStepId" : "88d5207a-f1c5-45bf-80f7-e7ad66b82a69",
    "entityLoadId" : "124eb4ac-79ab-4a57-8f10-c4f68e411451",
    "loadStepName" : "insert_fake_data",
    "position" : 3,
    "loadLanguageName" : "SQL",
    "stepType" : "OVERRIDE",
    "readAffectedRows" : false,
    "loadLanguageDescription" : "Run custom SQL logic.",
    "textStep" : "insert into <target_schema>.<target_entity_name>\nwith faker as (\nselect \n    seq4() as rn,\n    <target_schema>.fake('fi_FI', rn) as rs\nfrom table(generator(rowcount => 10000)))\nselect \n    date_part(epoch_millisecond, current_timestamp()) as stg_batch_id,\n    current_timestamp() as stg_create_time,\n    'faker' as stg_source_system,\n    'generated_data' as stg_source_entity,\n    'N/A' as stg_file_name,\n    rn,\n    rs:name::string as name,\n    rs:phone::string as phone,\n    rs:comp_name::string as comp_name\nfrom faker;"
  } ],
  "entityLoadOpts" : [ ],
  "entityLoadFiles" : [ ],
  "entityRelationships" : [ ],
  "grants" : [ ],
  "entityPhysicalOpts" : [ 
  {
    "physicalOptId" : "e60ff8f8-21fb-4426-9689-74a4408523c3",
    "entityId" : "a033d4e3-8d4c-4396-8109-1da36c1666ec",
    "value" : "true",
    "physicalOptType" : "STORAGE.TRANSIENT_TABLE"
  } ]
}