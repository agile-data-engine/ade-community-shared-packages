{
  "packageName" : "DEMO_TEMP_FUNCTION_BQ",
  "packageVersion" : "1001324",
  "templateVersion" : "2.11",
  "dataPackage" : {
    "packageId" : "3e31554c-f690-42b5-8a62-e0ae143ea44a",
    "packageName" : "DEMO_TEMP_FUNCTION_BQ",
    "packageVersion" : "1001324",
    "createdUser" : "henri.hemminki@solita.fi",
    "packageStatus" : "COMMITTED",
    "createdTimestamp" : 1692872736669,
    "modifiedTimestamp" : 1692946728332,
    "modifiedUser" : "henri.hemminki@solita.fi",
    "statusChangedTimestamp" : 1692872736669,
    "statusChangedUser" : "henri.hemminki@solita.fi",
    "deleted" : false,
    "description" : "#DEMO",
    "packageType" : "ENTITY_PACKAGE"
  },
  "packageDependencies" : [ ],
  "entities" : [ {
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "packageId" : "3e31554c-f690-42b5-8a62-e0ae143ea44a",
    "owner" : "staging_bq",
    "entityName" : "STG_TEST_DATA",
    "entityLogicalName" : "TEST_DATA",
    "zone" : "INGESTION",
    "entityType" : "STAGE",
    "physicalType" : "TABLE",
    "modifiedTimestamp" : 1692945850881,
    "modifiedUser" : "henri.hemminki@solita.fi",
    "isDeleted" : false,
    "isRecreateForced" : false,
    "isAutomaticallyManaged" : false
  } ],
  "attributes" : [ {
    "attributeId" : "2c9d42f3-66e1-42c2-8875-28b4453d9b8c",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "stg_batch_id",
    "position" : 1,
    "datatype" : "INTEGER8",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "RUN_ID"
  }, {
    "attributeId" : "669e3992-d24b-4f6c-822c-a67d015a4fa7",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "stg_create_time",
    "position" : 2,
    "datatype" : "TIMESTAMP",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SDT_STAGE_CREATE_TIME"
  }, {
    "attributeId" : "6b3b6b21-e3b3-495e-91b2-e526d21f1512",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "stg_source_system",
    "position" : 3,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 50,
    "charLength" : 0,
    "description" : "Internal Attribute",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SDT_STAGE_SOURCE"
  }, {
    "attributeId" : "68f0dc3c-0ccd-4521-a2f3-9c6517dcd37c",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "stg_source_entity",
    "position" : 4,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "description" : "Staging source entity",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "SOURCE_ENTITY"
  }, {
    "attributeId" : "149d9f5c-52d6-4ade-a1c1-2050b6a84155",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "stg_file_name",
    "position" : 5,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "description" : "Staging file name",
    "isNullable" : true,
    "isDeleted" : false,
    "attributeType" : "FILE_NAME"
  }, {
    "attributeId" : "384a84e7-9671-41d3-8672-53b62e00f726",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "row_num",
    "position" : 6,
    "datatype" : "INTEGER8",
    "isPersistent" : true,
    "isCharUsed" : false,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "378051fc-8ec3-471b-98ef-82829f1e04f1",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "name",
    "position" : 7,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 200,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "cdaaa87e-112e-439e-8fb7-c88c17b275f4",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "phone",
    "position" : 8,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "d4b7f98e-991e-494e-b660-0bf00574ec87",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "ipv6",
    "position" : 9,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  }, {
    "attributeId" : "b284d213-72ef-4166-b885-3131c94f35e2",
    "entityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "attributeName" : "comp_name",
    "position" : 10,
    "datatype" : "VARCHAR",
    "isPersistent" : true,
    "isCharUsed" : false,
    "dataLength" : 100,
    "charLength" : 0,
    "isNullable" : true,
    "isDeleted" : false
  } ],
  "referenceKeys" : [ ],
  "referenceKeyAttributes" : [ ],
  "keys" : [ ],
  "keyAttributes" : [ ],
  "mappingEntities" : [ {
    "mappingEntitiesId" : "4c613d87-831f-4241-8e95-0a31533c3712",
    "mappingName" : "TEMPORARY_MAPPING57660a56-6147-4a93-aa16-6915f3725828",
    "mappingType" : "SOURCE",
    "targetEntityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "entityLoadId" : "342e8de6-8aa2-43a7-9bdd-e76a86f3fc43",
    "position" : 1
  } ],
  "mappingSourceAttributes" : [ ],
  "mappingTargetAttributes" : [ ],
  "entityLoads" : [ {
    "entityLoadId" : "342e8de6-8aa2-43a7-9bdd-e76a86f3fc43",
    "targetEntityId" : "df629fed-b5ad-4e89-90dc-f45dce203e94",
    "loadName" : "load_stg_test_data_from_source_entity_01",
    "entityLoadType" : "TRANSFORM_PERSIST",
    "schedulingId" : "72baef04098f035e8a320b03ad197818",
    "customSchedulingName" : "DEMO_SCHEDULE",
    "enabled" : true
  } ],
  "entityLoadSteps" : [ {
    "entityLoadStepId" : "ba265411-8986-4915-8e30-164a8a374c3c",
    "entityLoadId" : "342e8de6-8aa2-43a7-9bdd-e76a86f3fc43",
    "loadStepName" : "truncate_table",
    "position" : 1,
    "loadLanguageName" : "SQL",
    "stepType" : "OVERRIDE",
    "readAffectedRows" : false,
    "loadLanguageDescription" : "Run custom SQL logic.",
    "textStep" : "truncate table <target_schema>.<target_entity_name>"
  }, {
    "entityLoadStepId" : "abd5e7af-9190-4c68-acad-b490640ecc10",
    "entityLoadId" : "342e8de6-8aa2-43a7-9bdd-e76a86f3fc43",
    "loadStepName" : "generate_and_insert_dummy_data",
    "position" : 2,
    "loadLanguageName" : "SQL",
    "stepType" : "OVERRIDE",
    "readAffectedRows" : false,
    "loadLanguageDescription" : "Run custom SQL logic.",
    "textStep" : "CREATE TEMP FUNCTION entity(seed INT64)\nRETURNS STRUCT<name String, phone String, ipv6 String, comp_name String>\nLANGUAGE js\nAS \"\"\"\n var f = getFaker()\n f.seed(Number(seed))\n var t = {};\n t.name = f.name.findName();\n t.phone = f.phone.phoneNumber('358-###-###-###')\n t.ipv6 = f.internet.ipv6();\n t.comp_name = f.company.companyName()\n return t;\n\"\"\"\nOPTIONS (\n   library=[\"gs://<bq_bucket>/bq_fake.js\"]\n);\n\nINSERT INTO <target_schema>.<target_entity_name>\nSELECT \n  UNIX_MILLIS(current_timestamp()) as stg_batch_id,\n  current_timestamp() as stg_create_time,\n  'system' as stg_source_system,\n  'test_data' as stg_source_entity,\n  'N/A' as stg_file_name,\n  row_num, \n  entity(row_num).*\nFROM UNNEST(GENERATE_ARRAY(1, 10000)) AS row_num;"
  } ],
  "entityLoadOpts" : [ ],
  "entityLoadFiles" : [ ],
  "entityRelationships" : [ ],
  "grants" : [ ],
  "entityPhysicalOpts" : [ ]
}